<div class="row">
  <div class="col-md-10 offset">
    <div class="row">
      <div class="col-md-3">
        <div class="row">
          <div class="col-md-6 item-center">
            <nz-avatar [nzSize]="64" [nzSrc]="baseFileUrl + avatar" nzIcon="user"></nz-avatar>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-12">
            <nz-tabset [nzTabPosition]="position">
              <nz-tab [nzTitle]="userTemplate">
                <ng-template #userTemplate>
                  <img height="16" width="16" src="../../../../assets/img/Graphicloads-Flat-Finance-Person.ico" alt="" />
                  Tài Khoản Của Tôi
                </ng-template>

                <nz-card [nzTitle]="titleTemplate">
                  <ng-template #titleTemplate>
                    <h3><b>Hồ Sơ Của Tôi</b></h3>
                    <p>Quản lý thông tin hồ sơ để bảo mật tài khoản</p>
                  </ng-template>
                  <div nz-row nzGutter="8">
                    <div nz-col nzSpan="20">
                      <form nz-form [formGroup]="formRegister" (ngSubmit)="submitForm()">
                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="username" nzRequired>Tên tài khoản </nz-form-label>
                          <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng nhập tên tài khoản!">
                            <input nz-input id="username" formControlName="username" placeholder="Tên tài khoản" />
                          </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">E-mail </nz-form-label>
                          <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="không đúng định dạng E-mail!">
                            <input nz-input placeholder="Email" formControlName="email" id="email" />
                          </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="nickname" nzRequired>
                            <span>Tên</span>
                          </nz-form-label>
                          <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Nhập vào tên!">
                            <input nz-input id="nickname" placeholder="Tên" formControlName="nickname" />
                          </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="phoneNumber" nzRequired>Số điện thoại </nz-form-label>
                          <nz-form-control
                            [nzSm]="14"
                            [nzXs]="24"
                            [nzValidateStatus]="formRegister.controls['phoneNumber']"
                            nzErrorTip="Vui lòng nhập số điện thoại!"
                          >
                            <nz-input-group [nzAddOnBefore]="addOnBeforeTemplate">
                              <ng-template #addOnBeforeTemplate>
                                <nz-select formControlName="phoneNumberPrefix" class="phone-select">
                                  <nz-option nzLabel="+84" nzValue="+84"></nz-option>
                                </nz-select>
                              </ng-template>
                              <input formControlName="phoneNumber" id="'phoneNumber'" nz-input />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>

                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="dateOfBirth" nzRequired>
                            <span>Ngày sinh</span>
                          </nz-form-label>
                          <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Nhập vào ngày sinh!">
                            <nz-date-picker [nzPlaceHolder]="'Nhập vào ngày sinh'" formControlName="dateOfBirth"> </nz-date-picker>
                          </nz-form-control>
                        </nz-form-item>

                        <nz-form-item>
                          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="sex" nzRequired>Giới tinh </nz-form-label>
                          <nz-form-control
                            [nzSm]="14"
                            [nzXs]="24"
                            [nzValidateStatus]="formRegister.controls['sex']"
                            nzErrorTip="Vui lòng chọn giới tính!"
                          >
                            <nz-radio-group formControlName="sex">
                              <label nz-radio [nzValue]="true">Nam</label>
                              <label nz-radio [nzValue]="false">Nữ</label>
                            </nz-radio-group>
                          </nz-form-control>
                        </nz-form-item>
                        <nz-form-item nz-row class="register-area">
                          <nz-form-control [nzSpan]="14" [nzOffset]="6">
                            <button nz-button nzType="primary">Lưu</button>
                          </nz-form-control>
                        </nz-form-item>
                      </form>
                    </div>
                    <div nz-col nzSpan="4">
                      <div class="row">
                        <div class="col-md-12 item-center">
                          <nz-avatar [nzSize]="72" [nzSrc]="avatarDisplayUrl" nzIcon="user"></nz-avatar>
                        </div>
                        <div style="margin-top: 10px; text-align: center" class="col-md-12">
                          <nz-upload
                            [nzShowUploadList]="false"
                            [nzBeforeUpload]="beforeUpload"
                            nzMultiple="false"
                            (nzChange)="handleChange($event)"
                            [nzAction]="uploadUrl"
                            [nzHeaders]="{ authorization: 'authorization-text' }"
                          >
                            <button nz-button><i nz-icon nzType="upload"></i>Chọn Ảnh</button>
                          </nz-upload>
                          <p>Dụng lượng file tối đa 2 MB</p>
                          <p>Định dạng:.JPEG, .PNG</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </nz-card>
              </nz-tab>
              <nz-tab [nzTitle]="billTemplate">
                <ng-template #billTemplate>
                  <img
                    height="16"
                    width="16"
                    src="../../../../assets/img/Dakirby309-Windows-8-Metro-Folders-OS-Documents-Library-Metro.ico"
                    alt=""
                  />
                  Đơn Mua
                </ng-template>
              </nz-tab>
              <nz-tab [nzTitle]="changePwTemplate">
                <ng-template #changePwTemplate>
                  <img height="16" width="16" src="../../../../assets/img/Graphicloads-100-Flat-Pencil.ico" alt="" />
                  Đổi Mật Khẩu
                </ng-template>

                <nz-card [nzTitle]="titleTemplate">
                  <ng-template #titleTemplate>
                    <h3><b>Đổi mật khẩu</b></h3>
                    <p>Để bảo mật tài khoản, vui lòng không chia sẻ mật khẩu cho người khác</p>
                  </ng-template>
                  <div nz-row nzGutter="8">
                    <div nz-col nzSpan="12" nzOffset="6">
                      <form nz-form [formGroup]="formChangePassword" (ngSubmit)="save()">
                        <nz-form-item>
                          <nz-form-label [nzSm]="7" [nzXs]="24" nzRequired nzFor="oldPassword">Mật khẩu cũ </nz-form-label>
                          <nz-form-control [nzSm]="16" [nzXs]="24" nzHasFeedback [nzErrorTip]="validateOldPassword">
                            <nz-input-group [nzSuffix]="oldPasswordSubfix">
                              <input
                                formControlName="oldPassword"
                                id="oldPassword"
                                [type]="passwordVisible ? 'text' : 'password'"
                                nz-input
                                placeholder="Nhập mật khẩu cũ"
                              />
                            </nz-input-group>
                            <ng-template #oldPasswordSubfix>
                              <i
                                nz-icon
                                [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                                (click)="passwordVisible = !passwordVisible"
                              ></i>
                            </ng-template>
                            <ng-template #validateOldPassword let-control>
                              <ng-container *ngIf="control.hasError('minlength')"> Tối thiểu 6 ký tự.</ng-container>
                              <ng-container *ngIf="control.hasError('required')"> Trường thông tin bắt buộc. </ng-container>
                              <ng-container *ngIf="control.hasError('invalidPw')"> Mật khẩu cũ không chính xác. </ng-container>
                            </ng-template>
                          </nz-form-control>
                        </nz-form-item>

                        <nz-form-item>
                          <nz-form-label [nzSm]="7" [nzXs]="24" nzRequired nzFor="newPassword">Mật khẩu mới </nz-form-label>
                          <nz-form-control [nzSm]="16" [nzXs]="24" nzHasFeedback [nzErrorTip]="validateNewPassword">
                            <nz-input-group [nzSuffix]="newPasswordSubfix">
                              <input
                                formControlName="newPassword"
                                id="newPassword"
                                [type]="newPasswordVisible ? 'text' : 'password'"
                                nz-input
                                placeholder="Nhập mật khẩu mới"
                              />
                            </nz-input-group>
                            <ng-template #newPasswordSubfix>
                              <i
                                nz-icon
                                [nzType]="newPasswordVisible ? 'eye-invisible' : 'eye'"
                                (click)="newPasswordVisible = !newPasswordVisible"
                              ></i>
                            </ng-template>
                            <ng-template #validateNewPassword let-control>
                              <ng-container *ngIf="control.hasError('minlength')"> Tối thiểu 6 ký tự.</ng-container>
                              <ng-container *ngIf="control.hasError('required')"> Trường thông tin bắt buộc. </ng-container>
                            </ng-template>
                          </nz-form-control>
                        </nz-form-item>

                        <nz-form-item>
                          <nz-form-label [nzSm]="7" [nzXs]="24" nzRequired nzFor="confirmPassword">Xác nhận mật khẩu </nz-form-label>
                          <nz-form-control [nzSm]="16" [nzXs]="24" nzHasFeedback [nzErrorTip]="validateConfirmPassword">
                            <nz-input-group [nzSuffix]="confirmPasswordSubfix">
                              <input
                                (ngModelChange)="checkConfirmPassword()"
                                formControlName="confirmPassword"
                                id="oldPassword"
                                [type]="confirmPasswordVisible ? 'text' : 'password'"
                                nz-input
                                placeholder="Nhập mật khẩu xác nhận"
                              />
                            </nz-input-group>
                            <ng-template #confirmPasswordSubfix>
                              <i
                                nz-icon
                                [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
                                (click)="confirmPasswordVisible = !confirmPasswordVisible"
                              ></i>
                            </ng-template>
                            <ng-template #validateConfirmPassword let-control>
                              <ng-container *ngIf="control.hasError('minlength')"> Tối thiểu 6 ký tự.</ng-container>
                              <ng-container *ngIf="control.hasError('required')"> Trường thông tin bắt buộc. </ng-container>
                              <ng-container *ngIf="control.hasError('invalidConfirmPw')"> Xác nhận mật khẩu không hợp lệ.</ng-container>
                            </ng-template>
                          </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                          <nz-form-control [nzSm]="12" nzOffset="6" [nzXs]="24">
                            <button nz-button nzType="primary" (click)="save()" class="btn-primary">
                              <i nz-icon nzType="save" nzTheme="fill"></i>Đổi mật khẩu
                            </button>
                          </nz-form-control>
                        </nz-form-item>
                      </form>
                    </div>
                  </div>
                </nz-card>
              </nz-tab>
            </nz-tabset>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
